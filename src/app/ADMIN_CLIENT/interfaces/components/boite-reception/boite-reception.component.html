<div class="container">
  <h3>Messages de yori.com</h3>
  <mat-tab-group>
    <mat-tab label="Tous les messages ({{ receivedMessages.length }})">
      <h2>Messages Reçus</h2>
      <div *ngFor="let message of receivedMessages">
          <div (click)="selectMessage(message)" class="message-preview">
              <strong>{{ message.subject }}</strong> - {{ message.content | slice:0:20 }}...
              <span class="message-date">{{ message.date | date:'dd MMMM yyyy à HH:mm' }}</span> <!-- Affiche la date -->
          </div>

          <!-- Affiche les détails du message si celui-ci est sélectionné -->
          <div *ngIf="selectedMessage === message" class="message-details">
              <h2>Détails du message</h2>
              <p><strong>Objet :</strong> {{ selectedMessage.subject }}</p>
              <p><strong>Corps :</strong> {{ selectedMessage.content }}</p>
              <p><strong>Date :</strong> {{ selectedMessage.date | date:'dd MMMM yyyy à HH:mm' }}</p> <!-- Affiche la date -->
              <button (click)="selectMessage(selectedMessage)" class="btn btn-cancel">Fermer</button>
              <button (click)="openReplyPopup()" class="btn btn-send">Répondre</button>
          </div>
      </div>

      <!-- Overlay pour le pop-up -->
      <div *ngIf="isReplying" class="overlay" (click)="closeReplyPopup()"></div>

      <!-- Pop-up de réponse -->
      <div *ngIf="isReplying" class="reply-popup">
          <h3 class="reply-title">Écrire une réponse</h3>
          <div class="reply-section">
              <label for="subject">Objet :</label>
              <input type="text" id="subject" [(ngModel)]="replySubject" placeholder="Entrez l'objet ici" class="reply-input" />

              <label for="body">Corps du message :</label>
              <textarea id="body" [(ngModel)]="replyBody" placeholder="Écrivez votre réponse ici" class="reply-textarea"></textarea>

              <label for="attachment">Joindre un document :</label>
              <input type="file" id="attachment" (change)="onFileSelected($event)" class="reply-file-input" />
          </div>
          <div class="reply-buttons">
              <button (click)="submitReply()" class="btn btn-send">Envoyer</button>
              <button (click)="closeReplyPopup()" class="btn btn-cancel">Annuler</button>
          </div>
      </div>
  </mat-tab>
    <mat-tab label="Envoyés">
      <div *ngFor="let sentMessage of sentMessages">
        <div (click)="selectMessage(sentMessage)" class="message-preview">
            <strong>{{ sentMessage.subject }}</strong> <!-- Affiche l'objet du message -->
        </div>

        <!-- Affiche les détails du message si celui-ci est sélectionné -->
        <div *ngIf="selectedMessage === sentMessage" class="message-details">
            <h2>Détails du message</h2>
            <p><strong>Objet :</strong> {{ selectedMessage.subject }}</p>
            <p><strong>Corps :</strong> {{ selectedMessage.content }}</p>
            <p><strong>Date :</strong> {{ selectedMessage.date | date:'dd MMMM yyyy à HH:mm' }}</p> <!-- Affiche la date -->
            <button (click)="selectMessage(selectedMessage)">Fermer</button>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="Suivis"> Content 3 </mat-tab>
  </mat-tab-group>

</div>
