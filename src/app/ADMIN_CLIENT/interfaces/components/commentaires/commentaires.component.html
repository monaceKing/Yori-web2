<style>
  .container{
    margin-top: -20px;
    padding-left: 30px;
  }

.comment{
  width: 30%;
  background-color: white;
  padding: 30px;
}

  .comment-rating {
    margin-top: 5px;
  }
  
  .circle {
    width: 10px; /* Ajustez la taille selon vos besoins */
    height: 10px; /* Ajustez la taille selon vos besoins */
    border-radius: 50%;
    margin-right: 5px; /* Espacement entre les cercles */
}

.filled {
    background-color: green; /* Couleur verte pour les cercles remplis */
}

.outline {
    background-color: white; /* Fond blanc pour les cercles non remplis */
    border: 2px solid green; /* Contour vert pour les cercles non remplis */
}

.rating-text {
    margin-top: 5px; /* Ajoute un espacement entre les cercles et le texte */
    font-size: 14px; /* Ajustez la taille de la police selon vos besoins */
}

/* moa */
  .comment-content {
    position: relative; /* Permet de positionner le bouton par rapport à cette div */
}

.reply-button {
    border: none;
    color: #77B5FE;
    display: block;
    margin-top: 5px;
    margin-left: 250px;
    background-color: initial;
    font-weight:bold;
    cursor: pointer;
}
  
  .commentaire {
    background-color: rgb(224, 224, 224);
    width: 300px;          /* Largeur fixe de 300 pixels */
    height: auto;          /* Hauteur automatique */
    display: inline-block; /* Permet à la div de s'ajuster à son contenu */
    padding: 10px;         /* Ajoute de l'espace intérieur */
    margin: 5px 0;        /* Ajoute un espacement vertical entre les commentaires */
    border: 1px solid #ccc; /* Optionnel : ajoute une bordure pour visualiser la div */
    border-radius: 5px;   /* Optionnel : arrondit les coins de la bordure */
    word-wrap: break-word; /* Permet au texte de revenir à la ligne si trop long */
}

.reponse{
  margin-bottom: 20px;
}
</style>

<div class="container">
  <h2>Avis des clients</h2>
  <p>Découvrez ce que vos clients ont pensé de leur séjour ! Vous pouvez lire les commentaires laissés par les clients et y répondre.</p>

  <div *ngFor="let comment of comments" class="comment">
    <!-- Première ligne : icône du profil et nom -->
    <div class="comment-header">
      <img src="path/to/profile-icon.png" alt="Profil" class="profile-icon" />
      <strong>{{ comment.userId }}</strong>
    </div>

    <!-- Deuxième ligne : date du commentaire -->
    <div class="comment-date">
      Commentaire {{ comment.createdDate | date:'dd/MM/yyyy' }}
    </div>

    <!-- Troisième ligne : appréciation -->
    <div class="comment-rating">
      <div style="display: flex; align-items: center;">
          <span style="margin-right: 5px;">{{ comment.rating }}</span>
          <span *ngFor="let i of [].constructor(5); let idx = index" 
                [ngClass]="{'circle': true, 'filled': idx < comment.rating, 'outline': idx >= comment.rating}">
          </span>
      </div>
      <div class="rating-text">
          <span *ngIf="comment.rating === 5">Satisfait</span>
          <span *ngIf="comment.rating === 4">Satisfait</span>
          <span *ngIf="comment.rating === 3">Moyen</span>
          <span *ngIf="comment.rating === 2">Pas satisfait</span>
          <span *ngIf="comment.rating === 1">Pas satisfait</span>
      </div>
  </div>


    <!-- Quatrième ligne : commentaire -->
    <div class="comment-content">
      <div class="commentaire">
          <p>{{ comment.content }}</p>
      </div>
      <button class="reply-button" (click)="toggleReply(comment.id)">Répondre</button>
  </div>

    <!-- Réponses -->
    <div *ngFor="let reply of comment.replies" class="reply">
      <p style="margin-left:20px;"><strong>{{ reply.userId }}</strong> : {{ reply.content }} - {{ reply.createdDate | date }}</p>
    </div>

    <!-- Champ de réponse -->
    <div *ngIf="isReplying(comment.id)" class="reponse">
      <input #replyInput placeholder="Répondre..." [(ngModel)]="replyContent[comment.id]" />
      <button [disabled]="!replyContent[comment.id]" (click)="addReply(comment.id, replyContent[comment.id]); replyContent[comment.id] = ''">Envoyer</button>
    </div>
  </div>

  <!-- <h3>Laissez un commentaire</h3>

  <input [(ngModel)]="newCommentUserId" placeholder="Identifiant de l'utilisateur" />
  <input [(ngModel)]="newCommentContent" placeholder="Laissez un commentaire..." />
  <input type="number" [(ngModel)]="newCommentRating" placeholder="Étoiles (1-5)" min="1" max="5" />
  
  <button (click)="addComment()">Envoyer</button> -->
</div>
