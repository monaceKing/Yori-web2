<div class="container">
    <div class="first" *ngIf="!showDetails">
    <div>
            <h2 class="titre">Accueil</h2>
            <div class="filtre">
                <!-- <div class="labels">
                    <label *ngFor="let label of labels; let i = index"
                           [ngClass]="getLabelClass(i)"
                           [attr.for]="label.for"
                           (click)="toggleCheckboxes()">
                      {{ label.text }}
                    </label>
                  </div> -->
               <div class="inputs">
                <div class="labels"> 
                    <label for="statut">Aperçu</label><br>
                    <select id="statut" class="select1" [(ngModel)]="selectedStatut" (change)="onStatutChange()">
                        <option *ngFor="let statut of statutsFiltres" [value]="statut">{{ statut }}</option>
                    </select> <br>
                
                    <select id="sousStatut"  *ngIf="selectedStatut !== 'Vue d\'ensemble'" [(ngModel)]="selectedSousStatut">
                        <option *ngFor="let sousStatut of sousStatuts[selectedStatut]" [value]="sousStatut">{{ sousStatut }}</option>
                        <option *ngIf="!sousStatuts[selectedStatut]?.length" disabled>Sélectionnez d'abord un statut</option>
                    </select>
                </div>
               <div class="labels">
                <label for="pays">Région</label><br>
                <select id="pays" class="select1" [(ngModel)]="selectedPays">
                    <option *ngFor="let pays of paysFiltres" [value]="pays">{{ pays }}</option>
                </select>
               </div>
                <div class="labels">
                    <label for="evaluation">Evaluation</label><br>
                    <select id="evaluation" class="select1" [(ngModel)]="selectedEvaluation">
                        <option *ngFor="let evaluation of evaluationsFiltres" [value]="evaluation">{{ evaluation }}</option>
                    </select>
                </div>
                <div class="labels">
                    <label for="duree">Filtre par année</label><br>
                    <select id="duree" class="select1" [(ngModel)]="selectedDuree">
                        <option *ngFor="let duree of dureesFiltres" [value]="duree">{{ duree }}</option>
                    </select>
                </div>
                  <div class="labels">
                    <label for="plus_filtre" class="style-5">Filtre</label><br>
                    <button type="button" id="plus_filtre" class="select" (click)="afficherFiltre()">Plus de filtres</button>
                  </div>
                  <div class="labels">
                    <label for=""></label><br>
                    <button type="button" class="voir">Voir les résultats</button>
                  </div>
              </div>
              <div *ngIf="openFiltre" class="checkbox">
                <div class="checkbox-container">
                  <div class="title">
                    <label for="">Statut des établissements</label>
                  </div>
                  <label class="checkbox-item">
                    <input type="checkbox" id="tous" /> Nouveau(x)
                  </label>
                  <label class="checkbox-item">
                    <input type="checkbox" id="reservation" /> Ancien(s)
                  </label>
                  <label class="checkbox-item">
                    <input type="checkbox" id="arrivees" /> Suspendu(s) temporairement
                  </label>
                  <label class="checkbox-item">
                    <input type="checkbox" id="departures" /> Supprimé(s) définitivement
                  </label> 
                  <label class="checkbox-item">
                    <input type="checkbox" id="sejour-en-cours" /> Fermé(s)
                  </label>
                </div>
                <div class="all-search">
                  <div>
                    <label for="search" class="lab-search">Mots-clés</label>
                  </div>
                  <div>
                    <input type="search" name="search" class="input-search">
                  </div>
                </div>
              </div>
            </div>
            <div class="resultats-info">
                <div>
                    {{ selectedStatut }}
                ({{ getClientsFiltres().length }})
                </div>
                <button class="printPage" (click)="printPage()">
                    <mat-icon>
                    print
                    </mat-icon>
                    Imprimer la liste des réservations
                </button>
            </div>
    </div>

    <div class="table-responsive">
      <table class="table">
        <thead>
        <tr>
            <th>Nom structure</th>
            <th>Pays/region</th>
            <th>contact</th>
            <th>Adresse e-mail</th>
            <th>Nombre de structure inscrite(s)</th>
            <th>Durée du compte</th>
            <th>Plus d'infos</th>
        </tr>
        </thead>
        <tbody>
          <tr *ngFor="let client of paginatedClients">
            <td style="color: #77B5FE;">{{ client.nom }}</td>
            <td>{{ client.pays }}</td>
            <td>{{ client.contact }}</td>
            <td>{{ client.email }}</td>
            <td>{{ client.nombreStructure }}</td>
            <td>{{ client.duree }} an(s)</td>
            <!-- <td [ngStyle]="{'color': client.evaluation === 'Mauvais' ? 'red' : 'black'}">
              <b>{{ client.evaluation }}</b>
            </td> -->
            <td>
                <a class="open-div2" (click)="afficherDetails(client)">
                    <!-- {{ client.id }} -->
                      voir plus
                </a>
            </td>
        </tr>
        <tr>
            <td colspan="10" class="td-pag">
                <div>
                    <button class="btn-pag" (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">&lt; Précédent</button>|
                    <span>Page</span>
                    |<button class="btn-pag" (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">Suivant &gt;</button>
                    <select id="itemsPerPage" (change)="onItemsPerPageChange($event)">
                        <option *ngFor="let option of itemsPerPageOptions" [value]="option">Afficher {{ option }} réservations</option>
                    </select>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
    </div>
    </div>


    <div *ngIf="showDetails">
        <div class="retour">
            <h2>Détails de l'établissement</h2>
            <b>&lt;</b><button class="revenir" (click)="revenir()">Revenir à la synthèse des réservations</button>
        </div>

        <div class="discuter">
            <div>
                <div>
                    Discuter
                </div>
                <div id="input-container"> <input type="text" (click)="toogleMessage()" placeholder="Envoyer un message" class="envoi"> <mat-icon>send</mat-icon> </div>
            </div>

            <div *ngIf="dialogueMessage" class="dialogueMessage">
                <div class="entete-message">
                    <div>Nouveau message</div>
                    <div class="fermerMessage" (click)="toogleMessage()">X</div>
                </div>
                <div class="corpsMessage">
                    <div class="ligne"></div>
                    <input type="text" placeholder="À  Hotel luis viton de sotéga" class="destinataire">
                    <div class="ligne"></div>
                    <div class="objectif">
                        <p>Objectif</p>
                        <input type="text" placeholder="" class="destinataire">

                    </div>
                    <div class="ligne"></div>
                    <Textarea class="zoneMessage">Bonjour comment vous allez...

                    </Textarea>

                </div>
                <div class="soummettreMessage">
                    <div>Lien</div>
                    
                        <button class="supprimer-btn" id="envoi-btn" (click)="messageenvoye()" >Envoyer</button>
                    
                </div>
            </div>

           <div>

            <div>
                Bloquer
            </div>
            <div>
                <select name="bloquer" id="bloquer">
                    <option value="Temporairement">Temporairement</option>
                </select>
            </div>
           </div>
            <div>
                <div></div><br>
                <div><button class="supprimer-btn">Supprimer l’établissement</button></div>
            </div>
        </div>

        <div *ngIf="dialogueMessageEnvoye" class="dialogueMessageEnvoye">
            <div class="fermerMessageEnvoye" (click)="fermerMessageenvoye()">X</div>
            <div class="containerSuccesMesssage">
            <div ><i class="fa-regular fa-circle-check" id="logoCheck"></i></div>
            <h3>Message envoyé .</h3>
            <p>Votre message a été envoyé avec succès</p>
            </div>
            
        </div>

        <div>
            < class="span">

        <div style="display: flex; justify-content: end; margin-right: 50px;">

                <button class="printPage2" (click)="printPage()">
                    <mat-icon>
                    print
                    </mat-icon>
                    Imprimer cette page
                </button>
          </div>



        <!------------------------------------------------------------------------------------------->
        <div>
            <mat-tab-group class="fixed-width">
                <mat-tab label="Information sur l'établissements">
                    <div *ngIf="selectedClient.evaluation == 'Mauvais'" class="fact-annulee">
                        <mat-icon style="color: brown;">
                            error
                        </mat-icon>
                        Fermeture de l'établissement
                    </div>

                    
                    <table class="table2">
                        <tr>
                            <td>
                                Nom du propriétaire
                            </td>
                            <td>
                                Nombre de structures supprimée(s) :
                            </td>
                        </tr>
                        <tr>
                            <td>
                                 <b>{{selectedClient.nom}}</b>
                            </td>
                            <td>
                                 <b>1</b>
                            </td>
                        </tr>
                        
                        <tr>
                            <td>Contact :</td>
                            <td>Nombre de structures fermée(s) :</td>
                        </tr>
                        <tr>
                            <td> <b>{{selectedClient.contact}}</b> </td>
                            <td> <b>0</b> </td>
                        </tr>
                        <tr>
                            <td>Service</td>
                        </tr>
                        <tr>
                            <td> <b>{{selectedClient.statut}}</b> </td>
                        </tr>
                        <tr>
                            <td>Type de propriété</td>
            
                        </tr>
                        <tr>
                            <td> <b>{{selectedClient.type_propriete}}</b> </td>
                            
                        </tr>
                        <tr>
                            <td>Date d'inscription</td>
                           
                        </tr>
                        <tr>
                            <td> <b>dim.19 juil 2022</b> </td>                
                        </tr>
                        <tr>
                            <td>Durée sur yori</td>
                        </tr>
                        <tr>
                            <td> <b>{{selectedClient.duree}}</b> </td>
                        </tr>
            
                        </table>
                </mat-tab>

                <mat-tab label="Photos">
                    <section class="section">
                        <div class="image-gallery">
                          <div *ngFor="let image of images; let i = index" class="image-item">
                            <label for="image-{{i}}">
                              <img [src]="image" alt="Image {{i + 1}}" class="image" />
                            </label>
                          </div>
                        </div>
                      </section>
                </mat-tab>
            </mat-tab-group>
            
          </div> 

    


